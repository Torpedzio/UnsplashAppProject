<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8" />
    <title>Unsplash Galeria</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
<h1>ðŸ“¸ Galeria Unsplash</h1>

<button onclick="loadRandom()">Losowe zdjÄ™cie</button>

<div>
    <input type="text" id="query" placeholder="Szukaj (np. mountain, cat)" />
    <button onclick="searchPhotos()">Szukaj</button>
</div>

<div id="result"></div>

<script>
    async function loadRandom() {
        try {
            const res = await fetch('/api/random');
            const photo = await res.json();
            displayPhoto(photo);
        } catch (err) {
            alert("BÅ‚Ä…d Å‚adowania zdjÄ™cia.");
        }
    }

    async function searchPhotos() {
        const query = document.getElementById('query').value.trim();
        if (!query) return alert("Wpisz frazÄ™!");

        try {
            const res = await fetch(`/api/search?query=${encodeURIComponent(query)}`);
            const data = await res.json();
            if (data.results && data.results.length > 0) {
                displayPhoto(data.results[0]); // pierwsze zdjÄ™cie
            } else {
                document.getElementById('result').innerHTML = "<p>Nie znaleziono zdjÄ™Ä‡.</p>";
            }
        } catch (err) {
            alert("BÅ‚Ä…d wyszukiwania.");
        }
    }

    function displayPhoto(photo) {
        const html = `
        <div class="photo">
          <img src="${photo.urls.regular}" alt="${photo.alt_description || 'zdjÄ™cie'}" />
          <p>Autor: <a href="${photo.user.links.html}" target="_blank">@${photo.user.username}</a></p>
        </div>
      `;
        document.getElementById('result').innerHTML = html;
    }
</script>
</body>
</html>